import { Meta, Canvas } from '@storybook/addon-docs'
import { ArgTypes } from '@docs/helpers/ArgTypes'
import { Source } from '@storybook/blocks'

import { Snackbar, addSnackbar } from '.'

import * as stories from './Snackbar.stories'

<Meta of={stories} />

# Snackbar

Display brief, temporary notifications of actions, errors, or other events in an application.

## Install

```sh
npm install @spark-ui/snackbar
```

## Import

```tsx
import { Snackbar, addSnackbar } from '@spark-ui/snackbar'
```

## Props & Options

<ArgTypes
  of={Snackbar}
  description="A container for queued snackbars. It should be placed at the root of the app."
  exclude={['position', 'priority']}
  subcomponents={{
    'Snackbar.Item': {
      of: Snackbar.Item,
      description: "The component that display each snackbar's content.",
    },
    'Snackbar.ItemIcon': {
      of: Snackbar.ItemIcon,
      description: 'The component that prepend an icon in the snackbar.',
    },
    'Snackbar.ItemAction': {
      of: Snackbar.ItemAction,
      description: 'The component that renders a button which action is safe to ignore.',
    },
    'Snackbar.ItemClose': {
      of: Snackbar.ItemClose,
      description: 'The component that closes the snackbar.',
    },
    addSnackbar: {
      of: addSnackbar,
      description: 'The function that triggers snackbars by adding them to a global queue.',
    },
  }}
/>

## Usage

### Default

First you'll need to render a `<Snackbar />` Component, that will be in charge of global snackbar queue and state.
Then you'll simply have to queue a snackbar from anywhere in the app with `addSnackbar` function.

<Canvas of={stories.Default} />

### Design

Use `design` prop on snackbar item, or as `addSnackbar` option, to set different look and feels.

<Canvas of={stories.Design} />

### Intent

Use `intent` prop on snackbar item, or as `addSnackbar` option, to set color intent.

<Canvas of={stories.Intent} />

### Icon

To add an icon before message use `icon` option from `addSnackbar`, or use `<Snackbar.ItemIcon />` within your custom `<Snackbar.Item />`.

<Canvas of={stories.Icon} />

### Close

**To dismiss snackbar automatically** use `timeout` option. For accessibility reasons the value of this timeout shouldn't be less than 5 seconds. Also for the same reasons **timers will automatically pause when the user focuses or hovers over a snackbar**.

**To allow the user to close the snackbar** thanks to a dedicated close button, use `isClosable` option from `addSnackbar`, or use `<Snackbar.ItemClose />` within your custom `<Snackbar.Item />`.

For both cases there is a specific `onClose` handler which is called when snackbar closes.

<Canvas of={stories.Close} />

### Action

To add an action to the snackbar use `onAction` and `actionLabel` options from `addSnackbar`, or use `<Snackbar.ItemAction />` within your custom `<Snackbar.Item />`. After interacting with it the snackbar will close automatically.

Keep in mind that users might miss snackbar actions and thus these shouldn't concern important things. In such case please use instead the `AlertDialog` component.

For accessibility reasons **snackbars won't dismiss automatically when an action is provided**.

<Canvas of={stories.Action} />
